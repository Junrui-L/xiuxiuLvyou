webpackJsonp([8],{"0c1L":function(t,e,a){"use strict";var s={name:"switch-option",props:{name:{type:String},value:null},data:function(){return{checked:this.value}},watch:{checked:function(t){this.$emit("update:value",t)}},methods:{clickSwitch:function(){this.checked=!this.checked}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"switch-option"},[a("span",{staticClass:"name"},[t._v(t._s(t.name))]),t._v(" "),a("div",{staticClass:"switch-ellipse",class:{active:t.checked},on:{click:t.clickSwitch}},[a("span",{staticClass:"switch-circle",class:{active:t.checked}})])])},staticRenderFns:[]},n=a("X4nt")(s,i,!1,null,null,null);e.a=n.exports},E9as:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("4YfN"),i=a.n(s),n=a("9rMa"),c=a("Bj9I"),r=a("/62z"),l={data:function(){return{godate:"",accountId:this.$route.query.guideId,playId:this.$route.query.playId,tripsnum:"",packageid:"",mpPackList:"",mpPackage:{mpPackageId:"",mpPackagePrice:"",mpPackageName:""},mpPackagecount:"",istuan:0,source:0,tipmount:1,linkman:"",linkPhone:"",requiretxt:"",yhjId:""}},components:{SwitchOption:a("0c1L").a},computed:i()({},Object(n.c)(["basePath","userInfo","baseOrder","guideInfo","play","pricePackage"]),{total:function(){return""!=this.mpPackage.mpPackagePrice?this.mpPackage.mpPackagePrice=this.mpPackage.mpPackagePrice:this.mpPackage.mpPackagePrice=0,""!=this.mpPackagecount?(this.mpPackagecount,this.mpPackagecount):this.mpPackagecount=0,console.log("...门票套餐价...门票套餐价"),console.log(this.pricePackage.price,this.baseOrder.peopleNum.value,this.mpPackage.mpPackagePrice,this.mpPackagecount),parseInt(this.pricePackage.price)*parseInt(this.baseOrder.peopleNum.value)+parseInt(this.mpPackage.mpPackagePrice)*parseInt(this.mpPackagecount)}}),mounted:function(){Object(c.k)(1).then(function(t){console.log("-------加载优惠券返回--------"),console.log(t)}),this.mpPicker=this.$createPicker({title:"门票数量",data:[r.b],alias:{value:"num"},onSelect:this.selectCountHandle,onCancel:this.cancelHandle}),this.initHeOrder()},methods:i()({},Object(n.b)(["GET_USERINFO"]),{showmpPackagecount:function(){this.mpPicker.show()},selectCountHandle:function(t){this.mpPackagecount=t[0]},initHeOrder:function(){var t=this;console.log(this.guide),this.godate=this.baseOrder.travalDate.value,this.tripsnum=this.baseOrder.peopleNum.value,this.packageid=this.baseOrder.mealType.id,Object(c.h)(this.godate,this.accountId,this.playId,this.tripsnum,this.packageid,0,0).then(function(e){console.log("-------订单初始化返回--------"),console.log(e),Object(c.i)().then(function(e){console.log("---下单前订单加载返回-----"),console.log(e),t.mpPackList=e.mpPackelist,t.linkman=e.visitor.nickname,t.linkPhone=e.visitor.mobile,t.GET_USERINFO(e.visitor);for(var a=[],s=0;s<e.mpPackelist.length;s++)a[s]={value:e.mpPackelist[s].id,text:e.mpPackelist[s].name};t.mpPackgePicker=t.$createPicker({title:"门票套餐",data:[a],onSelect:t.selectmpHandle,onCancel:t.cancelHandle})})})},showmpPackgePicker:function(){this.mpPackgePicker.show()},selectmpHandle:function(t,e,a){this.mpPackage.mpPackageId=t[0],this.mpPackage.mpPackagePrice=this.mpPackList[e[0]].price,this.mpPackage.mpPackageName=a[0]},newOrder:function(){var t=this;""==this.mpPackage.mpPackageName?this.$createToast({txt:"请选择门票套餐",type:"error",mask:!0,time:2e3}).show():""==this.mpPackagecount?this.$createToast({txt:"请选择门票套餐数量",type:"error",mask:!0,time:2e3}).show():""==this.linkman?this.$createToast({txt:"请填写联系人",type:"error",mask:!0,time:2e3}).show():""==this.linkPhone?this.$createToast({txt:"请填写联系人手机",type:"error",mask:!0,time:2e3}).show():""==this.requiretxt?this.$createToast({txt:"请填写备注",type:"error",mask:!0,time:2e3}).show():Object(c.c)(this.godate,this.accountId,this.playId,this.tripsnum,this.packageid,this.mpPackage.mpPackageId,this.mpPackagecount,this.istuan,this.source,this.tipmount,this.linkman,this.linkPhone,this.requiretxt,this.yhjId).then(function(e){var a=t;console.log(e),console.log("---------新下的订单返回了-----------"),e.msg?t.$createDialog({type:"alert",title:"温馨提示",content:e.msg,showClose:!0,onClose:function(){}}).show():a.$router.push({name:"order",query:{orderNum:e.data[1]}})})},endLog:function(){console.log(".....倒计时结束了.....")},onGroup:function(t){this.istuan=t?1:0}})},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order_detail"},[a("header",{staticClass:"guide-info clearfix"},[a("div",{staticClass:"guide-img fl"},[a("img",{attrs:{src:t.guideInfo.userImg,alt:""}})]),t._v(" "),a("dl",{staticClass:"guide-detail fl"},[a("dt",{staticClass:"guide-name"},[t._v(t._s(t.play.username))]),t._v(" "),a("dd",{staticClass:"guide-scenic"},[a("span",[t._v(t._s(t.play.scenicspot))]),a("span",[t._v(t._s(t.play.wfname))])]),t._v(" "),a("dd",{staticClass:"guide-mode"},[1==t.play.servicetype?[t._v("\n          景点详解\n        ")]:2==t.play.servicetype?[t._v("\n          带游服务\n        ")]:3==t.play.servicetype?[t._v("\n          当地游玩\n        ")]:4==t.play.servicetype?[t._v("\n          专线类型\n        ")]:t._e(),t._v(" "),0==t.play.tytype?[t._v("\n          (平分模式)\n        ")]:1==t.play.tytype?[t._v("\n          (固定折扣模式)\n        ")]:2==t.play.tytype?[t._v("\n          (剃分模式)\n        ")]:t._e()],2)])]),t._v(" "),a("div",{staticClass:"order-info"},[a("h3",{staticClass:"title"},[t._v("订单信息")]),t._v(" "),a("ul",{staticClass:"order-list"},[a("li",{staticClass:"info-item"},[t._v("游玩时间 "),a("span",{staticClass:"fr"},[t._v(t._s(t.baseOrder.travalDate.txt))])]),t._v(" "),a("li",{staticClass:"info-item"},[t._v("游玩人数 "),a("span",{staticClass:"fr"},[t._v(t._s(t.baseOrder.peopleNum.txt))])]),t._v(" "),a("li",{staticClass:"info-item"},[t._v("价格套餐 "),a("span",{staticClass:"fr"},[t._v(t._s(t.pricePackage.name)+"/"+t._s(t.pricePackage.price)+"元")])])])]),t._v(" "),a("div",{staticClass:"group-trip"},[a("switch-option",{attrs:{name:"开启团游",value:0!=t.istuan},on:{"update:value":t.onGroup}})],1),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"tickets"},[a("div",{staticClass:"tickit-m",on:{click:t.showmpPackgePicker}},[t._v("门票套餐\n      "),a("span",{staticClass:"tickit-txt fr"},[t._v("\n        "+t._s(""==t.mpPackage.mpPackageName?"请选择门票套餐":t.mpPackage.mpPackageName)+"\n        "),a("svg",[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])]),t._v(" "),a("div",{staticClass:"tickit-n",on:{click:t.showmpPackagecount}},[t._v("数量\n      "),a("span",{staticClass:"tickit-txt  fr"},[t._v("\n        "+t._s(""==t.mpPackagecount?"选择套餐数量":t.mpPackagecount)+"人\n        "),a("svg",[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])])]),t._v(" "),t._m(1),t._v(" "),a("ul",{staticClass:"contact"},[a("li",{staticClass:"contact-name"},[t._v("\n      联系人\n      "),a("span",{staticClass:"contact-txt fr"},[t._v("\n        "+t._s(t.linkman)+"\n          "),a("svg",[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])]),t._v(" "),a("li",{staticClass:"contact-phone"},[t._v("\n      电话\n      "),a("span",{staticClass:"contact-txt fr"},[t._v("\n        "+t._s(t.linkPhone)+"\n        "),a("svg",[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])])]),t._v(" "),a("div",{staticClass:"note-message"},[a("div",{staticClass:"title"},[t._v("备注")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.requiretxt,expression:"requiretxt"}],staticClass:"note-text",attrs:{maxlength:"60",placeholder:"备注"},domProps:{value:t.requiretxt},on:{input:function(e){e.target.composing||(t.requiretxt=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"coupons"},[t._v("优惠券\n    "),a("span",{staticClass:"coupon-txt  fr"},[t._v("\n        暂无优惠券可用\n        "),a("svg",[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])]),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"submit-order clearfix"},[a("div",{staticClass:"total fl"},[t._v("\n      总额:\n      "),a("span",{staticClass:"total-num fr"},[t._v("\n       ￥"+t._s(t.total)+"\n         "),a("svg",[a("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])]),t._v(" "),a("div",{staticClass:"btn-wrapper fr"},[a("button",{staticClass:"sub-btn",on:{click:t.newOrder}},[t._v("\n        提交订单\n      ")])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notify group-notify"},[a("p",[t._v("导游优惠模式：固定折扣模式，7，8z折")]),t._v(" "),a("p",[t._v("注意：团游必须有2个订单才生效，价格由最终团游数决定。而差价会在旅行结束后退到您的个人账户中。")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notify tickit-notify"},[a("p",[t._v("导游优惠模式：固定折扣模式，7，8z折")]),t._v(" "),a("p",[t._v("注意：团游必须有2个订单才生效，价格由最终团游数决定。而差价会在旅行结束后退到您的个人账户中。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"agreement"},[this._v("\n    点击提交订单表示阅读并同意 "),e("span",[this._v("向导服务合同")])])}]},p=a("X4nt")(l,o,!1,null,null,null);e.default=p.exports}});
//# sourceMappingURL=8.a1a3c70e6269eaa35878.js.map